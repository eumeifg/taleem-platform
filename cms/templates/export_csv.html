<%page expression_filter="h"/>
<%inherit file="base.html" />

<%namespace name='static' file='static_content.html'/>

<%!
  from django.utils.translation import ugettext as _
  from django.utils.translation import get_language_bidi
  from openedx.core.djangolib.markup import HTML, Text
  from openedx.core.djangolib.js_utils import (
      dump_js_escaped_json, js_escaped_string
  )
%>
<%block name="title">
${_("Question Bank Export")}
</%block>

<%block name="bodyclass">is-signedin course tools view-export</%block>

<%block name="header_extras">
  <style>
    % if get_language_bidi():
    .view-export .wrapper-status .list-progress .status-detail {
      margin-left: 0 !important;
      margin-right: 60px !important;
      float: right !important;
    }
    .view-export .wrapper-status .list-progress .status-visual {float: right !important;}
    .view-export .wrapper-status .list-progress .status-visual .icon {left: unset !important; right: 20px !important;}
    % endif
  </style>
</%block>

<%block name="requirejs">
  var courselikeHomeUrl = "${courselike_home_url | n, js_escaped_string}",
      is_library = ${library | n, dump_js_escaped_json},
      statusUrl = "${status_url | n, js_escaped_string}";

  require(["js/factories/export"], function(ExportFactory) {
      ExportFactory(courselikeHomeUrl, is_library, statusUrl);
  });
</%block>

<%block name="content">
<div class="wrapper-mast wrapper">
  <header class="mast has-subtitle">
    <h1 class="page-header">
      <small class="subtitle">${_("Tools")}</small>
        <span class="sr">&gt; </span>
        ${_("Question Bank Export")}
    </h1>
  </header>
</div>

<div class="wrapper-content wrapper">
  <section class="content">
    <article class="content-primary" role="main">

      <div class="introduction">
        <h2 class="title">${_("About Exporting Question Banks")}</h2>
        <div class="copy">
            <p>${_("You can export question banks and edit them outside of platform. The exported file is a .csv that contains the questions. You can also re-import questions banks that you've exported.")}</p>
        </div>
      </div>

      <div class="export-controls">
        <h2 class="title">
          ${_("Export My Question Bank Content")}
        </h2>

        <ul class="list-actions">
          <li class="item-action">
            <a class="action action-export action-primary" href="#">
              <span class="icon fa fa-arrow-circle-o-down" aria-hidden="true"></span>
              <span class="copy">
                ${_("Export Question Bank Content")}
              </span>
            </a>
          </li>
        </ul>
      </div>

      <div class="wrapper wrapper-status is-hidden">
        <h3 class="title">
          ${_("Question Bank Export Status")}
        </h3>

        <ol class="status-progress list-progress">
          <li class="item-progresspoint item-progresspoint-prepare is-complete">
            <span class="deco status-visual">
              <span class="icon fa fa-cog" aria-hidden="true"></span>
              <span class="icon fa fa-warning" aria-hidden="true"></span>
            </span>

            <div class="status-detail">
              <h3 class="title">${_("Preparing")}</h3>
              <div class="progress-bar">
                <div class="progress-fill"></div>
              </div>
              <p class="copy">${_("Preparing to start the export")}</p>
            </div>
          </li>

          <li class="item-progresspoint item-progresspoint-export is-started">
            <span class="deco status-visual">
              <span class="icon fa fa-cog" aria-hidden="true"></span>
              <span class="icon fa fa-warning" aria-hidden="true"></span>
            </span>

            <div class="status-detail">
              <h3 class="title">${_("Exporting")}</h3>
              <p class="copy">${_("Creating the export data files (You can now leave this page safely, but avoid making drastic changes to content until this export is complete)")}</p>
            </div>
          </li>

          <li class="item-progresspoint item-progresspoint-compress is-not-started">
            <span class="deco status-visual">
              <span class="icon fa fa-cog" aria-hidden="true"></span>
              <span class="icon fa fa-warning" aria-hidden="true"></span>
            </span>

            <div class="status-detail">
              <h3 class="title">${_("Compressing")}</h3>
              <p class="copy">${_("Compressing the exported data and preparing it for download")}</p>
            </div>
          </li>

          <li class="item-progresspoint item-progresspoint-success has-actions is-not-started">
            <span class="deco status-visual">
              <span class="icon fa fa-square-o" aria-hidden="true"></span>
            </span>

            <div class="status-detail">
              <h3 class="title">
                ${_("Success")}
                <span class="item-progresspoint-success-date"></span>
              </h3>
              <p class="copy">
                ${_("Your exported question bank can now be downloaded")}
              </p>

              <ul class="list-actions">
                <li class="item-action">
                  <a href="#" id="download-exported-button" class="action action-primary">
                    ${_("Download Exported Question Bank")}
                  </a>
                </li>
              </ul>
            </div>
          </li>
        </ol>
      </div>

    </article>

    <aside class="content-supplementary" role="complementary">
      <div class="bit">
          <h3 class="title-3">${_("Why export a question bank?")}</h3>
          <p>${_("You may want to edit the questions in your question bank directly, outside of platform. You may want to create a backup copy of your question bank. Or, you may want to create a copy of your question bank that you can later import into another question bank instance and customize.")}</p>
      </div>

      <div class="bit">
          <h3 class="title-3">${_("Opening the downloaded file")}</h3>
          <p>${_("Use any text editor or spreadsheet editor program to view question bank content.")}</p>
      </div>
      <div class="bit">
          <h3 class="title-3">${_("Supported question types")}</h3>
          <ul>
              <li>${_("Multiple Choice")}</li>
          </ul>
      </div>
    </aside>
  </section>
</div>
</%block>
